# -*- coding: utf-8 -*-
from mahjong.hand_calculating.yaku import Yaku
from mahjong.utils import is_chi, is_pon, is_sou, is_pin, is_man


class SuuRenkou(Yaku):

    def __init__(self, yaku_id=None):
        super(SuuRenkou, self).__init__(yaku_id)

    def set_attributes(self):
        self.tenhou_id = 58

        self.name = 'Suu Renkou'
        self.english = 'Quadruple Seaquenced Triplets'
        self.japanese = '四連刻'

        self.han_open = 13
        self.han_closed = 13

        self.is_yakuman = True

    def is_condition_met(self, hand, *args):

        pon_sets = [x for x in hand if is_pon(x)]

        if len(pon_sets) == 4:
            sou_sets = 0
            pin_sets = 0
            for item in pon_sets:
                if is_sou(item[0]):
                    sou_sets += 1
                elif is_pin(item[0]):
                    pin_sets += 1

            if sou_sets == 4 or pin_sets == 4:
                seq = [pon_sets[count + 1][0] - pon_sets[count][0] for count in range(3)]
                return seq.count(1) == 3
        else:
            return False
