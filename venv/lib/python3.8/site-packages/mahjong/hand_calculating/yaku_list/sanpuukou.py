# -*- coding: utf-8 -*-
from mahjong.constants import EAST, SOUTH, WEST, NORTH
from mahjong.hand_calculating.yaku import Yaku
from mahjong.utils import is_pon


class Sanpuukou(Yaku):

    def __init__(self, yaku_id=None):
        super(Sanpuukou, self).__init__(yaku_id)

    def set_attributes(self):
        self.tenhou_id = 59

        self.name = 'Sanpuukou'
        self.english = 'Three Winds'
        self.japanese = '三風刻'

        self.han_open = 2
        self.han_closed = 2

        self.is_yakuman = False

    def is_condition_met(self, hand, *args):
        pon_sets = [x for x in hand if is_pon(x)]
        if len(pon_sets) < 3:
            return False

        count_of_wind_sets = 0
        winds = [EAST, SOUTH, WEST, NORTH]
        for item in hand:
            if is_pon(item) and item[0] in winds:
                count_of_wind_sets += 1

        return count_of_wind_sets == 3
